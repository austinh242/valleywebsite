<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Valley Motel El Cajon-San Diego</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.css" rel="stylesheet">
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; color:#333; }
    header { background:#2C3E50; color:white; padding:20px; text-align:center; }
    nav a { color:white; margin:0 15px; text-decoration:none; }
    .hero { background:#ecf0f1; padding:60px 20px; text-align:center; }
    .hero h1 { margin-bottom:10px; }
    section { padding:40px 20px; max-width:1000px; margin:auto; }
    .rooms, .gallery { display:flex; flex-wrap:wrap; gap:20px; justify-content:center; }
    .room, .gallery-item { flex:1 1 200px; background:#f9f9f9; padding:20px; border-radius:8px; }
    .booking-form { max-width:500px; margin:auto; }
    .booking-form input, .booking-form select, .booking-form textarea {
      width:100%; padding:10px; margin:8px 0; box-sizing:border-box;
    }
    footer { background:#2C3E50; color:white; text-align:center; padding:20px; }
    .btn { display:inline-block; padding:10px 20px; background:#27AE60; color:white; text-decoration:none; border-radius:4px; cursor:pointer; }
    .btn:hover { background:#219150; }
    .confirmation { text-align:center; padding:20px; display:none; background:#dff0d8; color:#3c763d; margin-top:20px; border-radius:8px; }
    #calendar { max-width: 900px; margin: 40px auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    #popupForm {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: white; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.3);
      border-radius: 8px; z-index: 1000; display: none;
    }
    #popupOverlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); z-index: 999; display: none;
    }
  </style>
</head>
<body>

<div id="popupOverlay"></div>
<div id="popupForm">
  <h3>Add Room Info</h3>
  <label>Room Type:</label>
  <select id="popupRoom">
    <option>Standard Queen Room</option>
    <option>Standard Double Room</option>
    <option>Deluxe Room</option>
    <option>Superior Room</option>
    <option>Elite Room</option>
  </select>
  <label>Price ($):</label>
  <input type="number" id="popupPrice">
  <label>Rooms Available:</label>
  <input type="number" id="popupInventory">
  <input type="hidden" id="popupDate">
  <div style="margin-top:10px;">
    <button class="btn" onclick="submitPopup()">Save</button>
    <button class="btn" onclick="closePopup()" style="background:#c0392b; margin-left:10px;">Cancel</button>
  </div>
</div>

<section id="calendar-section">
  <h2 style="text-align:center;">Room Availability Calendar</h2>
  <div id="calendar"></div>
</section>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>
<script>
  document.getElementById('directBookingForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    const output = Array.from(data.entries()).map(([key, val]) => `${key}: ${val}`).join('\n');
    alert("Booking request submitted.\n\n" + output);
    document.getElementById('confirmationMessage').style.display = 'block';
    form.reset();
  });

  function openPopup(dateStr) {
    document.getElementById('popupDate').value = dateStr;
    document.getElementById('popupOverlay').style.display = 'block';
    document.getElementById('popupForm').style.display = 'block';
  }

  function closePopup() {
    document.getElementById('popupOverlay').style.display = 'none';
    document.getElementById('popupForm').style.display = 'none';
  }

  function submitPopup() {
    const date = document.getElementById('popupDate').value;
    const room = document.getElementById('popupRoom').value;
    const price = document.getElementById('popupPrice').value;
    const inventory = document.getElementById('popupInventory').value;
    const title = `${room} - $${price} (${inventory} left)`;

    calendar.addEvent({
      title: title,
      start: date,
      allDay: true
    });

    closePopup();
  }

  let calendar;
  document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('calendar');
    calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      editable: true,
      selectable: true,
      events: [],
      dateClick: function(info) {
        openPopup(info.dateStr);
      },
      eventClick: function(info) {
        if (confirm('Delete this entry: "' + info.event.title + '"?')) {
          info.event.remove();
        }
      }
    });
    calendar.render();
  });
</script>

</body>
</html>
